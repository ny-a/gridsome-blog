{"hash":"4b7f57356ef8578aec2266c678ee2f8d7788a7ee","data":{"post":{"id":"cfd9d4b99f3b3914d31803e87ed444f4","title":"Chromium の GUI を docker コンテナ内で実行する","content":"<p>前は Firefox でやりましたが、Chromium はサンドボックスがあったりして\n前のままのコマンドでは動いていませんでした。</p>\n<p>以下のコマンドで動きました。といっても <code>--privileged</code> を追加しただけですが。\n<code>--privileged</code> なしでも <code>--no-sandbox</code> をつけて chromium を起動すれば\n一応ウィンドウまでは出るのですが、グラフィックドライバがうまく\n読み込まれずに真っ白のままになってしまうという問題がありました。</p>\n<pre class=\"language-text\"><code class=\"language-text\">sudo docker run --rm \\\n  -v /tmp/.X11-unix \\\n  -v ~/.Xauthority:/home/user/.Xauthority \\\n  -e DISPLAY \\\n  -e XAUTHORITY=/home/user/.Xauthority \\\n  --net host \\\n  --privileged \\\n  archlinux \\\n  sh -c &#39;pacman -Syu --noconfirm chromium; useradd user; chown user:user /home/user; su user chromium&#39;</code></pre>\n<p>もう少し <code>--cap-add</code> などで Capability を絞ってもいけそうですね。</p>\n<p>Firefox に比べれば安定しているかなという印象ですが、やはり\nYouTube などを FullHD で視聴しようとするとタブがクラッシュしてしまうので、\n実用には厳しいかなという印象でした。</p>\n<p>わざわざ Docker 内で起動しなくても、psd なんかで毎回リセットするように\nしてあげればほぼ同じことが実現できるんですけどね……。</p>\n","date":"17 May 2020","timeToRead":1}},"context":{}}