{"hash":"f96e50d2bba7106fbc4fd8f98e2b5c9b6647e430","data":{"post":{"id":"f07164a2ada1f895af743388031b274a","title":"Pacman の multilib を sed で有効化する","content":"<p>タイトルの通りで、 Arch Linux の Docker イメージを AUR のビルド用にしたくて、 multilib を使う必要があったので方法を\n探してみました。</p>\n<p>まず試したのは patch だったのですが、初期インストール状態に含まれていないため、あまり慣れていない sed を使うことに\nしました。\n調べてみると\n<a href=\"https://unix.stackexchange.com/a/285162\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How to edit next line after pattern using sed? - StackExchange</a>\nにちょうど ArchLinux 用の(こちらは mirrorlist の方ですが)回答がありました。\nmultilib レポジトリの有効化用に変更したコマンドは以下の通りです。</p>\n<pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sed</span> -e <span class=\"token string\">'/\\[multilib\\]/,/^$/{s/^#//}'</span> /etc/pacman.conf</code></pre>\n<p>元のコマンド <code>/\\[multilib\\]/,/^$/{//!s/^#//}</code> には <code>//!</code> が入っていて、これで1行目を無視しているようなのですが、\nこれがどう動くのかは勉強不足で分かっていません……</p>\n<p>とりあえず sed で思ったよりいろんなことができることが分かりました。</p>\n","date":"29 March 2020","timeToRead":1}},"context":{}}