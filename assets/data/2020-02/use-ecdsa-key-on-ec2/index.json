{"hash":"7f6a954f51b57e1b18b356d5f937bc7545e66156","data":{"post":{"id":"6a9b7cddbdbfc1e18e9e0e94f8a7abb0","title":"EC2にECDSAのキーを使ってSSHできるようにしました","content":"<p>AWS のキーペアは RSA しか対応していないと思いますが、最近は RSA を使うこともかなり減っていて、新しくセットアップした\nPC などでは ECDSA/Ed25519 のキーしか作っていないこともあります。\nそこで、 UserData を使って普段使いの SSH キーを取得して SSH できるようにしました。</p>\n<h2 id=\"userdata\"><a href=\"#userdata\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>UserData</h2>\n<p>AmazonLinux2 を使っているので、ログインユーザーは <code>ec2-user</code> です。</p>\n<p>UserData を以下のようにします。</p>\n<pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token builtin class-name\">set</span> -eu\n\n<span class=\"token function\">curl</span> https://github.com/ny-a.keys <span class=\"token operator\">>></span> /home/ec2-user/.ssh/authorized_keys</code></pre>\n<p>AmazonLinux に入っている OpenSSH のバージョンが古くて RSA にしか対応していないわけではないので、\n<code>authorized_keys</code> に入れてあげさえすれば使うことができます。</p>\n<p>AWS のキーペアで管理しないため、本番環境などでは何か問題があるかも……とは思いますが、普段使いのキーを使える上に、\n普段使いのキーを更新したあとに起動したインスタンスは新しいキーを使えるようになるので、利便性は高いんじゃないかなと\n思います。</p>\n<p>とりあえず、開発中などはこのようにすると便利そうだと思いました。</p>\n","date":"25 February 2020","timeToRead":1}},"context":{}}