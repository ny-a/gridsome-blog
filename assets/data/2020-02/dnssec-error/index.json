{"hash":"ac1dc8f8aca9d8344293a989c80824e5f770d162","data":{"post":{"id":"b6d76bad4ed9817eca6c2a82c00fed3c","title":"DNSSEC validation failed エラー","content":"<p>Raspberry Pi に ArchLinux をインストールして RTC モジュールの設定をしてみたのですがうまくいかず、\nDNSSEC のエラーでホスト名の解決ができない問題に遭遇しました。</p>\n<p>始めの問題としては、 <code>pacman -Syu</code> が通りませんでした。</p>\n<pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">sudo</span> pacman -Syu\n:: Synchronizing package databases<span class=\"token punctuation\">..</span>.\nerror: failed retrieving <span class=\"token function\">file</span> <span class=\"token string\">'core.db'</span> from mirror.archlinuxarm.org <span class=\"token builtin class-name\">:</span> Could not resolve host: mirror.archlinuxarm.org\nerror: failed to update core <span class=\"token punctuation\">(</span>invalid url <span class=\"token keyword\">for</span> server<span class=\"token punctuation\">)</span>\nerror: failed retrieving <span class=\"token function\">file</span> <span class=\"token string\">'extra.db'</span> from mirror.archlinuxarm.org <span class=\"token builtin class-name\">:</span> Could not resolve host: mirror.archlinuxarm.org\nerror: failed to update extra <span class=\"token punctuation\">(</span>invalid url <span class=\"token keyword\">for</span> server<span class=\"token punctuation\">)</span>\nerror: failed retrieving <span class=\"token function\">file</span> <span class=\"token string\">'community.db'</span> from mirror.archlinuxarm.org <span class=\"token builtin class-name\">:</span> Could not resolve host: mirror.archlinuxarm.org\nerror: failed to update community <span class=\"token punctuation\">(</span>invalid url <span class=\"token keyword\">for</span> server<span class=\"token punctuation\">)</span>\nerror: failed retrieving <span class=\"token function\">file</span> <span class=\"token string\">'alarm.db'</span> from mirror.archlinuxarm.org <span class=\"token builtin class-name\">:</span> Could not resolve host: mirror.archlinuxarm.org\nerror: failed to update alarm <span class=\"token punctuation\">(</span>invalid url <span class=\"token keyword\">for</span> server<span class=\"token punctuation\">)</span>\nerror: failed retrieving <span class=\"token function\">file</span> <span class=\"token string\">'aur.db'</span> from mirror.archlinuxarm.org <span class=\"token builtin class-name\">:</span> Could not resolve host: mirror.archlinuxarm.org\nerror: failed to update aur <span class=\"token punctuation\">(</span>invalid url <span class=\"token keyword\">for</span> server<span class=\"token punctuation\">)</span>\nerror: failed to synchronize all databases</code></pre>\n<p><code>/etc/resolv.conf</code> の内容は問題なさそうですし、 <code>systemd-networkd</code> と <code>systemd-resolved</code> も問題なく動いていて、\nその2つを restart してみても変わりませんでした。</p>\n<p><code>dig</code> コマンドを入れようにも pacman が通らないのですが、 <code>systemd-resolve</code> コマンドでホスト名の解決ができるようです。\n試してみると、</p>\n<pre class=\"language-shell\"><code class=\"language-shell\">$ systemd-resolve ntp.org\nntp.org: resolve call failed: DNSSEC validation failed: no-signature</code></pre>\n<p>などと出てホスト名が解決できないようです。\n<code>systemctl status systemd-resolved</code> を見てみると、他のホスト名も同様にエラーになっています。\n(初めの方は <code>no-signature</code> ではなく <code>signature-expired</code> が出ていました)</p>\n<p><a href=\"https://archlinuxarm.org/forum/viewtopic.php?f=9&#x26;t=13614\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">[SOLVED] DNS not working after pacman -Syu</a>\nに <code>systemd-resolved</code> を止めるという解決方法が書かれていたので試したところ、うまくいきました。</p>\n<p>DNSSEC についてあまり詳しくないので、きちんと調べてみようと思いました……。</p>\n","date":"09 February 2020","timeToRead":1}},"context":{}}