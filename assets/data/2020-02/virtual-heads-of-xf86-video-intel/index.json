{"hash":"f0c4cb17a2619b94f83a897abc63060f46289712","data":{"post":{"id":"91d0a5821ffa07a65a16dccbea9f8a48","title":"Xorgの仮想ディスプレイについて調べました","content":"<p>Linux デスクトップで、他のデバイスを VNC などを使って仮想的にワイアレスディスプレイとして使うために、\n仮想ディスプレイを追加する方法を調べました。</p>\n<h2 id=\"余っているディスプレイ出力を使う\"><a href=\"#%E4%BD%99%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%83%87%E3%82%A3%E3%82%B9%E3%83%97%E3%83%AC%E3%82%A4%E5%87%BA%E5%8A%9B%E3%82%92%E4%BD%BF%E3%81%86\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>余っているディスプレイ出力を使う</h2>\n<p><a href=\"https://bbs.archlinux.org/viewtopic.php?id=180904\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">[SOLVED] Creating a Virtual Display/monitor - Arch Forum</a>\nを見ると、余っている(ディスプレイを接続していない)ディスプレイ出力を使用して仮想ディスプレイを作成することができるようです。\nディスプレイを接続して表示している状態で切断した状態と同じだと思います。</p>\n<p>ただ、前回これを使って VNC で接続した場合、リフレッシュレートがかなり下がってしまっていた記憶があるため、\n他の方法を探してみました。</p>\n<h2 id=\"virtual1を作成する\"><a href=\"#virtual1%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>VIRTUAL1を作成する</h2>\n<p><a href=\"https://unix.stackexchange.com/questions/378373/add-virtual-output-to-xorg\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Add VIRTUAL output to Xorg - Stack Exchange</a>\nを見てみると、 intel ドライバを使って VirtualHeads を作成することができるようです。</p>\n<pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> pacman -S xf86-video-intel\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span>EOH <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> /etc/X11/xorg.conf.d/20-intel-virtual-heads.conf\nSection <span class=\"token string\">\"Device\"</span>\n    Identifier <span class=\"token string\">\"intelgpu0\"</span>\n    Driver <span class=\"token string\">\"intel\"</span>\n    Option <span class=\"token string\">\"VirtualHeads\"</span> <span class=\"token string\">\"2\"</span>\nEndSection\nEOH</code></pre>\n<p>Xorg を再起動すると、output として VIRTUAL1 が追加されています。</p>\n<p>ただ、\n<a href=\"https://wiki.archlinux.jp/index.php/Intel_Graphics#.E3.82.A4.E3.83.B3.E3.82.B9.E3.83.88.E3.83.BC.E3.83.AB\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Intel Graphics - Arch Wiki</a>\nに書かれていますが、 <code>xf86-video-intel</code> は非推奨扱いになっていて、標準の <code>modesetting</code> ドライバが推奨されているようです。</p>\n<p>とはいえ、\n<a href=\"https://gitlab.freedesktop.org/xorg/xserver/issues/179\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">xorg/xserver Issue#179</a>\nに issue が上がっていますが、 <code>modesetting</code> ドライバに VirtualHeads 機能は追加されていないようです。</p>\n<p>modesetting ドライバで仮想ディスプレイを作成する方法も調べてみましたが、うまく情報をみつけることができませんでした。\n本当は Xmonad のワークスペースをマシン間で任意に対応させたいのですが……それはかなり難しそうですね。</p>\n","date":"26 February 2020","timeToRead":1}},"context":{}}