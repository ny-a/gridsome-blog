{"hash":"3c96a08cef8aac62a2894047aab331bbbfcecdb2","data":{"post":{"id":"79c9a0508552a8302a3acba70b252abb","title":"RTTY のデコードを試す(4)","content":"<p>プログラムでの文字へのデコードを試す前に、サンプリングレートが 8kHz、\n量子化ビット数が 8bit の unsigned な wave ファイルという制約を\nなんとか取り払えないか試してみます。</p>\n<p>まず、サンプリングレートは簡単で、変数に入っている数値を変更するだけで\n問題なさそうです。が、window_size も同じ比率で変更してあげないと、\n出力に差が出てくるようです。\n同じ比率を保つために、window_size はサンプリングレートの250分の1に\nして、出力が変化しないようにします。</p>\n<p>ちなみに、サンプリングレートは wave モジュールで取得できるようです。\nわざわざ変更するのも面倒なので、取得するようにしましょう。</p>\n<p>また、unsigned を仮定しているのは、フレームの値から 128 を引いている\n部分のようです。(量子化ビット数も関係ありますが。)</p>\n<p>量子化ビット数を変更できるようにするには、今のフレーム(バイナリ)の\n0番目の値のみを見ている所を変更する必要がありそうです。\nPython の<a href=\"https://docs.python.org/3/library/stdtypes.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Built-in Types</a> の、\n<a href=\"https://docs.python.org/3/library/stdtypes.html#int.from_bytes\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">int.from_bytes</a> を\n使えばよさそうです。\nunsigned の制約も外すために、128 を引いている部分もビット数から計算して\n引くように変更します。unsigned 8bit のときに -128 なのは、u8 が [0, 255] で、\nその半分を引いて [-128, 127] にするためですね。同様に、unsigned 16bit であれば\n-(2^15) してあげればいいですね。signed であれば何も引きません。一般化すると、\nn bit のとき、signed であれば -0、unsigned であれば -(2^(n-1)) ということに\nなります。</p>\n<p>あとは愚直に実装して、<a href=\"https://github.com/ny-a/rtty/tree/improve-ny-a\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ny-a/RTTY - GitHub</a> に\npush すれば完了です。</p>\n","date":"09 June 2021","timeToRead":1}},"context":{}}